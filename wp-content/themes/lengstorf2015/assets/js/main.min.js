/*! This theme rides a Hoverboard (http://gethoverboard.com/) */
function HighlightShare(a){var b=a||{},c=b.classNames||{},d=this.config={url:b.url||window.location.href,hashtags:b.hashtags||"",related:b.related||"jlengstorf",via:b.via||"",classNames:{wrapper:c.wrapper||"highlight-share__share-box",active:c.active||"highlight-share__is-active",tweetBtn:c.tweetBtn||"highlight-share__share-btn--twitter"},appendTo:"body"},e=document.createElement("div"),f=document.createElement("button");this.isActive=!1,f.className=d.classNames.tweetBtn,e.className=d.classNames.wrapper,e.appendChild(f),e.addEventListener("click",this.handleButtonClick.bind(this)),document.querySelector(d.appendTo).appendChild(e),document.addEventListener("mouseup",this.handleSelection.bind(this))}jQuery(function(a){var b=window.getComputedStyle(document.body,":after").getPropertyValue("content").replace(/\W/g,""),c=new Date("2014-12-30T12:00:00"),d=Date.now(),e=d-c,f=Math.ceil(e/864e5);a(".days-abroad").text(f+" days"),a(".subnav-toggle").on("click",function(b){b.preventDefault();var c=a(".site-header").toggleClass("open").hasClass("open"),d=c?"Less":"More";a(this).text(d)}),"desktop"===b&&a(".main-content__sharing").on("click","a",function(b){b.preventDefault(),window.open(a(this).attr("href"),"sharing-window","width=800, height=400, top=200, left=300")});var g=a(".main-content__headline,.main-content__headline--related,.main-content__headline--single");if(g.each(function(){var b=a(this);b.css({backgroundImage:"url("+b.data("image")+")"})}),"desktop"===b){var h=a(".main-content__headline,.main-content__headline--single").data("image"),i=h.replace(/([x\d-]+)?\.(png|jpe?g|gif)/,".$2"),j=a("body"),k=j.css("background-color"),l=-1===k.indexOf("a")?k.replace(")",", .92)").replace("rgb","rgba"):k,m="linear-gradient(to bottom, "+l+", "+k+" 50vw)";j.css({backgroundImage:m+", url("+i+")"})}}),HighlightShare.prototype=Object.create({constructor:{value:HighlightShare}}),HighlightShare.prototype.getSelectedText=function(){if(window.getSelection){var a=window.getSelection();if(a.getRangeAt&&a.rangeCount)return a.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return!1},HighlightShare.prototype.restoreSelectedText=function(a){if(a)if(window.getSelection){var b=window.getSelection();b.removeAllRanges(),b.addRange(a)}else document.selection&&a.select&&a.select()},HighlightShare.prototype.handleSelection=function(a){this.savedText=this.getSelectedText(),setTimeout(this.showSharingBox.bind(this),100,a)},HighlightShare.prototype.showSharingBox=function(a){var b=0===this.savedText.toString().length,c=this.getWrapper(),d=["a","img"],e=a.target.tagName.toLowerCase();b||this.isActive||-1!==d.indexOf(e)?this.hideSharingBox():(this.isActive=!0,c.style.left=a.pageX+"px",c.style.top=a.pageY+"px",c.className+=" "+this.config.classNames.active)},HighlightShare.prototype.handleButtonClick=function(a){this.savedText&&(-1!==a.target.className.indexOf(this.config.classNames.tweetBtn)&&window.open(this.buildTwitterUrl(),"sharing-window","width=600, height=400, top=200, left=300"),this.restoreSelectedText(this.savedText))},HighlightShare.prototype.hideSharingBox=function(){var a=this.getWrapper(),b=a.className.replace(this.config.classNames.active,"");a.style.left="",a.style.top="",a.className=b,this.isActive=!1},HighlightShare.prototype.buildTwitterUrl=function(){var a="https://twitter.com/intent/tweet",b="",c={text:this.savedText,url:this.config.url||"",hashtags:this.config.hashtags||"",related:this.config.related||"",via:this.config.via||""};for(var d in c)c[d].toString().length>0&&(b+=0===b.length?"?":"&",b+=d+"="+c[d]);return a+b},HighlightShare.prototype.getWrapper=function(){return document.getElementsByClassName(this.config.classNames.wrapper)[0]};var hishare=new HighlightShare({via:"jlengstorf"});
//# sourceMappingURL=main.min.js.map